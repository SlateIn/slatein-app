<app-page-header [pageTitle]="pageTitle" [backButton]="true" [typeOfComponent]="typeOfComponent"></app-page-header>

<ion-content padding>
  <form [formGroup]="updatePwdForm">
    <ion-item>
      <ion-input placeholder="Current Password" formControlName="currentPassword" type="password" clear-on-edit
        autocomplete="current-password"></ion-input>
      <ion-icon name="key" align-self-end></ion-icon>
    </ion-item>
    <ion-item>
      <ion-input placeholder="Password" formControlName="password" [type]="!showPassword ? 'password' : 'text'"
        clear-on-edit autocomplete="new-password"></ion-input>
      <ion-icon *ngIf="!showPassword" (click)="toggleShowPassowrd()" name="eye-outline"></ion-icon>
      <ion-icon *ngIf="showPassword" (click)="toggleShowPassowrd()" name="eye-off-outline"></ion-icon>
    </ion-item>
    <ion-item *ngIf="controls.password.errors && controls.password.errors.minlength" lines="none">
      <div>
        <ion-label color="danger">Password must be at least 6 characters long.</ion-label>
      </div>
    </ion-item>

    <ion-item>
      <ion-input placeholder="Confirm Password" formControlName="confirmPassword"
        [type]="!showConfPassword ? 'password' : 'text'" clear-on-edit autocomplete="new-password">
      </ion-input>
      <ion-icon *ngIf="!showConfPassword" (click)="toggleConfShowPassowrd()" name="eye-outline"></ion-icon>
      <ion-icon *ngIf="showConfPassword" (click)="toggleConfShowPassowrd()" name="eye-off-outline"></ion-icon>
    </ion-item>
    <ion-item *ngIf="controls.confirmPassword.errors && controls.confirmPassword.errors.mustMatch" lines="none">
      <div>
        <ion-label color="danger">Passwords must match</ion-label>
      </div>
    </ion-item>

    <ion-item lines="none" *ngIf="updatePwdErrorMsg">
      <ion-label color="danger ion-text-wrap">{{ updatePwdErrorMsg }}</ion-label>
    </ion-item>

    <ion-button expand="block" class="ion-margin-top register" fill="solid" size="default"
      (click)="validateAndUpdatePwd()" [disabled]="!updatePwdForm.valid">Update Password</ion-button>
  </form>
</ion-content>